header:
  version: 8

repos:
  meta-rust:
    url: https://github.com/meta-rust/meta-rust.git
    path: layers/meta-rust
    # meta-iotedge depends on cargo 1.41
    branch: 7ff669d8cedd83a2d3efb73073a63b0a7efffddc

  meta-iotedge:
    url: https://github.com/Azure/meta-iotedge.git
    path: layers/meta-iotedge
    branch: "#-REF_SPEC-#"

  meta-tpm:
    url: https://git.yoctoproject.org/git/meta-security
    path: layers/meta-security
    branch: "#-REF_SPEC-#"
    layers:
      meta-tpm:

local_conf_header:
  z95-iotedge: |
     IMAGE_INSTALL:append += " iotedge-daemon "
     IMAGE_INSTALL:append += " iotedge-cli "
     IMAGE_INSTALL:append += " tpm2-tools "
     IMAGE_INSTALL:append += " tpm2-tss "
     IMAGE_INSTALL:append += " ca-certificates "
     IMAGE_INSTALL:append += " iw "
     IMAGE_INSTALL:append += " connman "
     IMAGE_INSTALL:append += " connman-client "
     PACKAGECONFIG:append_pn-qemu-native = " sdl"
     PACKAGECONFIG:append_pn-nativesdk-qemu = " sdl"